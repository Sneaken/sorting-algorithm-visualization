(this["webpackJsonpsorting-algorithm-visualization"]=this["webpackJsonpsorting-algorithm-visualization"]||[]).push([[0],{27:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),u=c(20),a=c.n(u),s=(c(27),c(13)),i=c(3),l=c(8),b=c(9),j=c(15),o=c.n(j);function O(){var e=Object(r.useReducer)((function(e){return e+1}),0);return Object(b.a)(e,2)[1]}var f={count:100,data:[],delay:100,useRAF:!1,isContinue:!0,isSorting:!1},d=n.a.createContext(f),h=c(1),v=function(){var e=Object(r.useContext)(d),t=e.count,c=e.data,n=e.delay,u=e.isContinue,a=e.isSorting,s=e.useRAF,j=Object(i.f)(),f=Object(r.useState)([]),v=Object(b.a)(f,2),g=v[0],x=v[1],m=O(),p=Object(r.useRef)(!1),R=Object(r.useRef)(!0),y=Object(r.useRef)(!1),C=Object(r.useRef)(100);R.current=u,p.current=a,y.current=s,C.current=n;var N=Object(r.useRef)([]);N.current=g;var k=Object(r.useRef)(0),S=Object(r.useRef)(0),w=Object(r.useRef)(0),A=Object(r.useRef)(!1),F=Object(r.useCallback)((function(){x(JSON.parse(JSON.stringify(c))),E()}),[c]),E=function(){p.current=!1,k.current=0,S.current=0,w.current=0};Object(r.useEffect)((function(){F()}),[F]);var J=Object(r.useCallback)((function(e){var t=k.current;if(t<e.length){var c=S.current;if(c<e.length-t-1){if(e[c-1]&&(e[c-1].status=void 0),e[c].status="current",e[c+1].status="target",S.current++,e[c].value>e[c+1].value)if(A.current){e[c].status="target",e[c+1].status="current";var r=e[c].value;e[c].value=e[c+1].value,e[c+1].value=r,A.current=!1}else S.current--,A.current=!0}else k.current++,S.current=0,e[c-1]&&(e[c-1].status=void 0),e[c].status="finished",w.current++;return Object(l.a)(e)}return Object(l.a)(e)}),[]),L=Object(r.useCallback)((function(){if(R.current){p.current=!0;var e=J(N.current);x(e),w.current!==e.length?y.current?requestAnimationFrame(L):setTimeout(L,C.current):(E(),m())}}),[J,m]);return Object(r.useEffect)((function(){u&&p.current&&L()}),[u,L,a]),Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{onClick:function(){return j.push("/bubble-sort")},children:"\u5192\u6ce1\u6392\u5e8f"}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"flex items-center justify-center",children:[Object(h.jsx)("div",{className:"current w-6 h-6"}),"\u5f53\u524d",Object(h.jsx)("div",{className:"target w-6 h-6 ml-2"}),"\u6b63\u5728\u6bd4\u8f83",Object(h.jsx)("div",{className:"finished w-6 h-6 ml-2"}),"\u7ed3\u675f\u6bd4\u8f83"]})}),Object(h.jsx)("div",{className:"m-20",children:g.map((function(e){return Object(h.jsx)("div",{className:o()("bg-black inline-block ml-px",e.status),style:{width:"calc(".concat(100/t,"% - 1px)"),height:"".concat(e.value,"px")}},e.value)}))})]})},g=c(2),x=function(){var e=Object(r.useContext)(d),t=e.count,c=e.data,n=e.delay,u=e.isContinue,a=e.isSorting,s=e.useRAF,j=Object(i.f)(),f=Object(r.useState)([]),v=Object(b.a)(f,2),x=v[0],m=v[1],p=O(),R=Object(r.useRef)(!1),y=Object(r.useRef)(!0),C=Object(r.useRef)(!1),N=Object(r.useRef)(100);y.current=u,R.current=a,C.current=s,N.current=n;var k=Object(r.useRef)([]);k.current=x;var S=Object(r.useRef)(0),w=Object(r.useRef)(0),A=Object(r.useRef)(0),F=Object(r.useRef)(0),E=Object(r.useRef)("toRight"),J=Object(r.useRef)(!1),L=Object(r.useRef)(!1),D=Object(r.useRef)(0),M=Object(r.useRef)(!0),q=Object(r.useRef)(!0),z=Object(r.useCallback)((function(){m(JSON.parse(JSON.stringify(c))),T(c.length)}),[c]),T=function(e){S.current=0,w.current=e-1,A.current=0,F.current=0,D.current=0,M.current=!0,q.current=!0,E.current="toRight",J.current=!1,L.current=!1};Object(r.useEffect)((function(){z()}),[z]);var U=Object(r.useCallback)((function(e){var t=S.current;if(t<w.current){if("toRight"===E.current){var c=A.current;if(c<e.length-t-1){if(e[c-1]&&"finished"!==e[c-1].status&&(e[c-1].status=void 0),e[c].status="current",e[c+1].status="target",A.current++,e[c].value>e[c+1].value)if(J.current){e[c].status="target",e[c+1].status="current";var r=e[c+1].value;e[c+1].value=e[c].value,e[c].value=r,J.current=!1,q.current=!1}else A.current--,J.current=!0,q.current=!0;return E.current="toRight",Object(l.a)(e)}E.current="toLeftStart"}if("toLeftStart"===E.current)return e[A.current].status="finished",E.current="toLeft",M.current=!0,w.current--,F.current=w.current,D.current++,Object(l.a)(e);if(q.current)return D.current=e.length,e.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{status:"finished"})}));if("toLeft"===E.current){var n=F.current;if(n>t){if(e[n+1]&&"finished"!==e[n+1].status&&(e[n+1].status=void 0),e[n].status="current",e[n-1].status="target",F.current--,e[n-1].value>e[n].value)if(e[n].status="target",e[n-1].status="current",L.current){var u=e[n].value;e[n].value=e[n-1].value,e[n-1].value=u,L.current=!1,M.current=!1}else F.current++,L.current=!0,M.current=!0;return E.current="toLeft",Object(l.a)(e)}E.current="toRightStart"}return"toRightStart"===E.current?(e[F.current].status="finished",E.current="toRight",q.current=!0,S.current++,A.current=S.current,F.current=w.current,D.current++,Object(l.a)(e)):M.current?(D.current=e.length,e.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{status:"finished"})}))):Object(l.a)(e)}return e[t].status="finished",Object(l.a)(e)}),[]),B=Object(r.useCallback)((function(){if(y.current){R.current=!0;var e=U(k.current);m(e),D.current!==e.length?C.current?requestAnimationFrame(B):setTimeout(B,N.current):(T(e.length),p())}}),[U,p]);return Object(r.useEffect)((function(){u&&R.current&&B()}),[u,B,a]),Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{onClick:function(){return j.push("/cocktail-sort")},children:"\u9e21\u5c3e\u9152\u6392\u5e8f"}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"flex items-center justify-center",children:[Object(h.jsx)("div",{className:"current w-6 h-6"}),"\u5f53\u524d",Object(h.jsx)("div",{className:"target w-6 h-6 ml-2"}),"\u6b63\u5728\u6bd4\u8f83",Object(h.jsx)("div",{className:"finished w-6 h-6 ml-2"}),"\u7ed3\u675f\u6bd4\u8f83"]})}),Object(h.jsx)("div",{className:"m-20",children:x.map((function(e){return Object(h.jsx)("div",{className:o()("bg-black inline-block ml-px",e.status),style:{width:"calc(".concat(100/t,"% - 1px)"),height:"".concat(e.value,"px")}},e.value)}))})]})},m=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{}),Object(h.jsx)(x,{})]})};function p(e,t){switch(t.type){case"init":return Object(g.a)({},f);case"changeData":return Object(g.a)(Object(g.a)({},e),{},{data:t.payload});case"changeCount":return Object(g.a)(Object(g.a)({},e),{},{count:t.payload});case"changeDelay":return Object(g.a)(Object(g.a)({},e),{},{delay:t.payload});case"toggleContinue":return Object(g.a)(Object(g.a)({},e),{},{isContinue:!e.isContinue});case"toggleSorting":return Object(g.a)(Object(g.a)({},e),{},{isSorting:!e.isSorting});case"toggleUseRAF":return Object(g.a)(Object(g.a)({},e),{},{useRAF:!e.useRAF});default:return Object(g.a)(Object(g.a)({},e),t)}}var R=function(e){var t=e.children,c=Object(r.useReducer)(p,f),n=Object(b.a)(c,2),u=n[0],a=n[1];return Object(h.jsx)(d.Provider,{value:Object(g.a)(Object(g.a)({},u),{},{dispatch:a}),children:t})};function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Array(e).fill(0).map((function(e,c){return c+(t?0:200*Math.random())}))}function C(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return N(y(e,t))}function N(e){for(var t,c,r=e.length-1;r>=0;r--)c=e[t=Math.floor(Math.random()*(r+1))],e[t]=e[r],e[r]=c;return e}var k=function(){var e=Object(r.useContext)(d),t=e.count,c=e.delay,n=e.useRAF,u=e.isSorting,a=e.isContinue,s=e.dispatch,i=Object(r.useCallback)((function(e){s({type:"changeCount",payload:Number(e.target.value)})}),[s]),l=Object(r.useCallback)((function(e){s({type:"changeDelay",payload:Number(e.target.value)})}),[s]),b=Object(r.useCallback)((function(){s({type:"changeData",payload:C(t).map((function(e){return{value:e}}))})}),[s,t]),j=Object(r.useCallback)((function(){s({type:"toggleSorting"})}),[s]),o=Object(r.useCallback)((function(){s({type:"toggleContinue"})}),[s]),O=Object(r.useCallback)((function(){s({type:"toggleUseRAF"})}),[s]);return Object(r.useEffect)((function(){b()}),[]),Object(h.jsxs)("div",{className:"m-10",children:[Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsxs)("label",{className:"flex-1",children:["\u6570\u636e\u6570\u91cf\uff1a",Object(h.jsx)("input",{type:"number",value:t||"",onChange:i})]}),Object(h.jsxs)("label",{className:"flex-1",children:["\u5ef6\u8fdf\uff1a",Object(h.jsx)("input",{className:"disabled:opacity-50",type:"number",value:c||"",disabled:n,onChange:l})]}),Object(h.jsxs)("label",{className:"flex-1 mr-1",children:[Object(h.jsx)("input",{type:"checkbox",value:n,onChange:O}),"\u542f\u7528requestAnimationFrame"]})]}),Object(h.jsx)("button",{className:"rounded-md p-1 bg-blue-400 text-white mr-1 disabled:opacity-50",onClick:b,disabled:u,children:"\u66f4\u6362\u6570\u636e"}),Object(h.jsx)("button",{className:"rounded-md p-1 bg-blue-400 text-white mr-1 disabled:opacity-50",onClick:j,disabled:u,children:"\u5f00\u59cb"}),Object(h.jsx)("button",{className:"rounded-md p-1 bg-blue-400 text-white mr-1 disabled:opacity-50",onClick:o,children:a?"\u6682\u505c":"\u7ee7\u7eed"})]})};var S=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{children:Object(h.jsx)("h1",{className:"m-0 text-center text-2xl",children:"\u6392\u5e8f\u7b97\u6cd5\u53ef\u89c6\u5316"})}),Object(h.jsx)("main",{className:"",children:Object(h.jsxs)(R,{children:[Object(h.jsx)(k,{}),Object(h.jsx)(s.a,{children:Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{path:"/",exact:!0,component:m}),Object(h.jsx)(i.a,{path:"/bubble-sort",exact:!0,component:v}),Object(h.jsx)(i.a,{path:"/cocktail-sort",exact:!0,component:x})]})})]})})]})};a.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.068d6f3b.chunk.js.map